(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){},102:function(e,t,c){"use strict";c.r(t);var s=c(19),n=c.n(s),a=c(11),i=c(7),r=c(6),o=c(10),l=c(4),d=c(0),u=c.n(d),j="https://mate-academy.github.io/react_phone-catalog/api/products";function b(e){return new Promise((function(t){setTimeout(t,e)}))}var m,p=function(e){return b(300).then((function(){return fetch("".concat(j,"/").concat(e,".json"))})).then((function(e){if(!e.ok)throw new Error;return e.json()}))};!function(e){e.LOAD_Products="Unable to load products",e.LOAD_ProductDetails="Unable to load product details",e.NONE=""}(m||(m={}));var O=c(1),v=u.a.createContext({error:m.NONE,setError:function(){}}),_=u.a.createContext({notification:"",setNotification:function(){}}),h=function(e){var t=e.children,c=Object(d.useState)(m.NONE),s=Object(l.a)(c,2),n=s[0],a=s[1],i=Object(d.useState)(""),r=Object(l.a)(i,2),o=r[0],u=r[1],j=Object(d.useMemo)((function(){return{error:n,setError:a}}),[n]),b=Object(d.useMemo)((function(){return{notification:o,setNotification:u}}),[o]);return Object(O.jsx)(v.Provider,{value:j,children:Object(O.jsx)(_.Provider,{value:b,children:t})})},x=u.a.createContext({productsFromServer:[],setProductsFromServer:function(){},isLoadProducts:!1,setIsLoadProducts:function(){}}),f=function(e){var t=e.children,c=Object(d.useState)([]),s=Object(l.a)(c,2),n=s[0],a=s[1],i=Object(d.useState)(!1),u=Object(l.a)(i,2),p=u[0],_=u[1],h=Object(d.useContext)(v).setError,f=Object(d.useMemo)((function(){return{productsFromServer:n,setProductsFromServer:a,isLoadProducts:p,setIsLoadProducts:_}}),[n,p]),N=function(){var e=Object(o.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,b(300).then((function(){return fetch("".concat(j,".json"))})).then((function(e){if(!e.ok)throw new Error;return e.json()}));case 4:t=e.sent,a(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h(m.LOAD_Products);case 11:return e.prev=11,_(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){N()}),[]),Object(O.jsx)(x.Provider,{value:f,children:t})},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=Object(d.useState)((function(){var c=localStorage.getItem(e);if(!c)return t;try{return JSON.parse(c)||t}catch(s){return t}})),s=Object(l.a)(c,2),n=s[0],a=s[1];return[n,function(t){a(t),localStorage.setItem(e,JSON.stringify(t))}]},g=u.a.createContext({cart:[],setCart:function(){}}),y=u.a.createContext({favorites:[],setFavorites:function(){}}),k=function(e){var t=e.children,c=N("cart"),s=Object(l.a)(c,2),n=s[0],a=s[1],i=N("favorites"),r=Object(l.a)(i,2),o=r[0],d=r[1];return Object(O.jsx)(g.Provider,{value:{cart:n,setCart:a},children:Object(O.jsx)(y.Provider,{value:{favorites:o,setFavorites:d},children:t})})},C=c(13),w=c(25),S=(c(36),c(37),c(38),c(54),function(){return Object(O.jsxs)("section",{className:"banner-slider",children:[Object(O.jsx)("div",{className:"main-container main-container--disable-on-mobile",children:Object(O.jsxs)("div",{className:"banner-slider__content",children:[Object(O.jsx)("button",{type:"button",className:"banner-slider__button banner-slider__button--prev",children:Object(O.jsx)("img",{src:"icons/arrow.svg",alt:"prev button"})}),Object(O.jsx)(w.a,{slidesPerView:1,spaceBetween:30,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{el:".banner-slider__pagination",clickable:!0},navigation:{nextEl:".banner-slider__button--next",prevEl:".banner-slider__button--prev"},modules:[C.c,C.b,C.a],children:["img/banner-phones.png","img/banner-tablets.png","img/banner-accessories.png"].map((function(e){return Object(O.jsx)(w.b,{children:Object(O.jsx)("img",{src:e,alt:"banner img",className:"banner-slider__image"})},e)}))}),Object(O.jsx)("button",{type:"button",className:"banner-slider__button banner-slider__button--next",children:Object(O.jsx)("img",{src:"icons/arrow.svg",alt:"next button"})})]})}),Object(O.jsx)("div",{className:"banner-slider__pagination"})]})}),P=(c(55),c(5)),F=c(15),q=c.n(F),E=(c(56),function(e){var t=e.className,c=e.product,s=Object(d.useContext)(g),n=s.cart,a=s.setCart,i=Object(d.useContext)(y),r=i.favorites,o=i.setFavorites,l=n.some((function(e){return e.id===(null===c||void 0===c?void 0:c.id)})),u=r.some((function(e){return e.id===(null===c||void 0===c?void 0:c.id)}));return Object(O.jsxs)("div",{className:"primary-button ".concat(t),children:[Object(O.jsx)("button",{type:"button",className:q()("primary-button__buy",{"primary-button__buy--is-added":l}),onClick:function(){if(c)if(0!==n.length)if(l){var e=n.filter((function(e){return e.id!==c.id}));a(e)}else a([].concat(Object(P.a)(n),[{id:c.id,quantity:1,product:c}]));else a([{id:c.id,quantity:1,product:c}])},children:l?"Added to cart":"Add to cart"}),Object(O.jsx)("button",{type:"button",className:"primary-button__favorite",onClick:function(){if(c)if(0!==r.length)if(u){var e=r.filter((function(e){return e.id!==c.id}));o(e)}else o([].concat(Object(P.a)(r),[c]));else o([c])},"data-cy":"addToFavorite",children:u?Object(O.jsx)("img",{src:"icons/favourites-filled.svg",alt:"button favourite"}):Object(O.jsx)("img",{src:"icons/favourites.svg",alt:"button favourite"})})]})}),L=function(e){var t=e.product,c=t.imageUrl,s=t.name,n=t.price,i=t.screen,r=t.capacity,o=t.ram,l=t.discount,d=t.id,u=t.type,j=Math.round(n-n*(l/100));return Object(O.jsxs)("div",{className:"product-card","data-cy":"cardsContainer",children:[Object(O.jsxs)(a.b,{to:function(){switch(u){case"phone":return"../phones/".concat(d);case"tablet":return"../tablets/".concat(d);case"accessory":return"../accessories/".concat(d);default:return""}}(),className:"product-card__link",children:[Object(O.jsx)("img",{src:c,alt:"",className:"product-card__image"}),Object(O.jsx)("div",{className:"product-card__title",children:s}),Object(O.jsxs)("div",{className:"prices",children:[Object(O.jsx)("div",{className:"prices__price",children:"$".concat(l?j:n)}),l>0&&Object(O.jsx)("div",{className:"prices__price prices__price--discount",children:"$".concat(n)})]}),Object(O.jsx)("div",{className:"line line__card"}),Object(O.jsxs)("div",{className:"product-card__details",children:[Object(O.jsxs)("div",{className:"product-card__details-row",children:[Object(O.jsx)("div",{className:"product-card__details-option",children:"Screen"}),Object(O.jsx)("div",{className:"product-card__details-value",children:i})]}),Object(O.jsxs)("div",{className:"product-card__details-row",children:[Object(O.jsx)("div",{className:"product-card__details-option",children:"Capacity"}),Object(O.jsx)("div",{className:"product-card__details-value",children:r})]}),Object(O.jsxs)("div",{className:"product-card__details-row",children:[Object(O.jsx)("div",{className:"product-card__details-option",children:"RAM"}),Object(O.jsx)("div",{className:"product-card__details-value",children:o})]})]})]}),Object(O.jsx)(E,{product:t})]})},A=(c(57),function(e){var t=e.products,c=e.title,s=e.className;return Object(O.jsx)("div",{className:"".concat(s,"-slider"),children:Object(O.jsxs)("div",{className:"main-container",children:[Object(O.jsxs)("div",{className:"".concat(s,"-slider__header"),children:[Object(O.jsx)("h1",{children:c}),Object(O.jsxs)("div",{className:"".concat(s,"-slider__control"),children:[Object(O.jsx)("button",{type:"button",className:"".concat(s,"-slider__button ").concat(s,"-slider__button--prev"),children:Object(O.jsx)("img",{src:"icons/arrow.svg",alt:"prev button"})}),Object(O.jsx)("button",{type:"button",className:"".concat(s,"-slider__button ").concat(s,"-slider__button--next"),children:Object(O.jsx)("img",{src:"icons/arrow.svg",alt:"next button"})})]})]}),Object(O.jsx)(w.a,{slidesPerView:"auto",spaceBetween:16,navigation:{nextEl:".".concat(s,"-slider__button--next"),prevEl:".".concat(s,"-slider__button--prev")},modules:[C.c,C.b,C.a],breakpoints:{1200:{slidesPerView:4,spaceBetween:0}},children:t.map((function(e){return Object(O.jsx)(w.b,{children:Object(O.jsx)(L,{product:e})},e.id)}))})]})})}),M=function(){var e=Object(d.useContext)(x).productsFromServer.filter((function(e){return!e.discount})).sort((function(e,t){return t.price-e.price}));return Object(O.jsx)("section",{className:"brand-new",children:Object(O.jsx)(A,{products:e,title:"New brands",className:"brand-new"})})},I=function(){var e=Object(d.useContext)(x).productsFromServer.filter((function(e){return e.discount}));return Object(O.jsx)("section",{className:"hot-prices",children:Object(O.jsx)(A,{products:e,title:"Hot prices",className:"hot-prices"})})},T=(c(58),function(){var e=Object(d.useContext)(x).productsFromServer,t=function(t){return e.reduce((function(e,c){return c.type===t?e+1:e}),0)},c=[{category:"phones",title:"Mobile phones",count:t("phone")},{category:"tablets",title:"Tablets",count:t("tablet")},{category:"accessories",title:"Accessories",count:t("accessory")}];return Object(O.jsx)("section",{className:"shop-by-category","data-cy":"categoryLinksContainer",children:Object(O.jsxs)("div",{className:"main-container",children:[Object(O.jsx)("h1",{children:"Shop by category"}),Object(O.jsx)("div",{className:"shop-by-category__content",children:Object(O.jsx)("div",{className:"grid",children:c.map((function(e){return Object(O.jsxs)(a.c,{to:"/".concat(e.category),className:"shop-by-category__category shop-by-category__category--".concat(e.category),children:[Object(O.jsx)("div",{className:"shop-by-category__image",children:Object(O.jsx)("img",{src:"img/category-".concat(e.category,"-v2.jpg"),alt:"".concat(e.category," category")})}),Object(O.jsx)("h3",{className:"shop-by-category__title",children:e.title}),Object(O.jsx)("div",{className:"shop-by-category__count",children:"".concat(e.count," models")})]})}))})})]})})}),B=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(S,{}),Object(O.jsx)(I,{}),Object(O.jsx)(T,{}),Object(O.jsx)(M,{})]})};function R(e,t){var c=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(l.a)(e,2),s=t[0],n=t[1];null===n?c.delete(s):Array.isArray(n)?(c.delete(s),n.forEach((function(e){c.append(s,e)}))):c.set(s,n)})),c.toString()}var D=c(43),V=c.n(D),$=(c(59),function(e){var t=e.pageCount,c=Object(a.d)(),s=Object(l.a)(c,2),n=s[0],i=s[1],r=n.get("page")||1;return Object(O.jsx)(V.a,{previousLabel:"<",nextLabel:">",pageCount:t,onPageChange:function(e){var t=e.selected;window.scrollTo(0,0),i(R(n,{page:"".concat(t+1)}))},containerClassName:"pagination",previousLinkClassName:"pagination__link pagination__link--prev",pageLinkClassName:"pagination__link",nextLinkClassName:"pagination__link pagination__link--next",disabledClassName:"pagination__link--disabled",activeClassName:"pagination__link--active",forcePage:+r-1,prevRel:"prevButton","data-cy":"pagination"})}),U=c(45),J=(c(60),function(e){var t=e.placeholder,c=e.defaultValue,s=e.options,n=e.onChange,a=e.selectTitle,i=e.classModificator;return Object(O.jsxs)("div",{role:"button",className:"select",children:[Object(O.jsx)("div",{className:"select__title",children:a}),Object(O.jsx)(U.a,{unstyled:!0,placeholder:t,isSearchable:!1,defaultValue:c,options:s,className:"select-container ".concat(i),classNamePrefix:"select-item",onChange:n})]})}),H=(c(86),function(e){var t=e.text;return Object(O.jsx)("p",{className:"no-results",children:t})}),Y=(c(87),function(e){var t=e.type,c=e.productName;return Object(O.jsxs)("div",{className:"breadcrumbs","data-cy":"breadCrumbs",children:[Object(O.jsx)(a.b,{to:"/",className:"breadcrumbs__home-link",children:Object(O.jsx)("img",{src:"icons/home.svg",alt:"home"})}),Object(O.jsx)("img",{src:"icons/arrow.svg",alt:"arrow",className:"breadcrumbs__arrow"}),Object(O.jsx)("p",{className:q()("breadcrumbs__title",{"breadcrumbs__title--selected":!c}),children:function(){switch(t){case"phone":return"Phones";case"tablet":return"Tablets";case"accessory":return"Accessories";default:return""}}()}),c&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:"icons/arrow.svg",alt:"arrow",className:"breadcrumbs__arrow"}),Object(O.jsx)("p",{className:q()("breadcrumbs__title",{"breadcrumbs__title--selected":c}),children:c})]})]})}),G=function(e,t){return Math.round(e-e*(t/100))},Q=(c(88),function(e){var t=e.products,c=e.title,s=e.isFavorites,n=[{value:"age",label:"Newest"},{value:"name",label:"Alphabetically"},{value:"price",label:"Cheapest"}],i=[{value:"4",label:"4"},{value:"8",label:"8"},{value:"16",label:"16"},{value:"all",label:"All"}],r=Object(a.d)(),o=Object(l.a)(r,2),d=o[0],u=o[1],j=d.get("sort"),b=d.get("perPage")||4,m=d.get("page")||1,p=d.get("query")||"",v=t.filter((function(e){return e.name.toLowerCase().replace(/\s+/g,"").includes(p)})),_=v.length,h="all"===b?_:b,x=+h*(+m-1),f=Math.ceil(_/+h),N=n.find((function(e){return e.value===j})),g=i.find((function(e){return e.value===b})),y=_<=+i[0].value||s,k=f<=1||y,C=Object(P.a)(v).sort((function(e,t){switch(j){case"age":return e.age-t.age;case"name":return e.name.localeCompare(t.name);case"price":return G(e.price,e.discount)-G(t.price,t.discount);default:return 0}})),w=s?v:C.slice(x,+h+x);return Object(O.jsx)("section",{className:"products-list","data-cy":"productList",children:Object(O.jsxs)("div",{className:"main-container",children:[_>0?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Y,{type:t[0].type}),Object(O.jsx)("h1",{className:"products-list__title",children:c}),Object(O.jsx)("div",{className:"products-list__subtitle",children:"".concat(_," models")}),!s&&Object(O.jsx)(J,{placeholder:"Sort by...",defaultValue:N,options:n,onChange:function(e){return u(R(d,{sort:(null===e||void 0===e?void 0:e.value)||null}))},selectTitle:"Sort by"}),!y&&Object(O.jsx)(J,{placeholder:"".concat(b),defaultValue:g,options:i,onChange:function(e){null!==e&&void 0!==e&&e.value&&(+e.value*+m>_||"all"===e.value)?u(R(d,{perPage:e.value,page:null})):u(R(d,{perPage:(null===e||void 0===e?void 0:e.value)||null}))},selectTitle:"Items on page",classModificator:"select-container--less"}),Object(O.jsx)("section",{className:"products-list__items",children:w.map((function(e){return Object(O.jsx)(L,{product:e},e.id)}))})]}):Object(O.jsx)(H,{text:"".concat(c," Not Found")}),!k&&Object(O.jsx)($,{pageCount:f})]})})}),W=function(){var e=Object(d.useContext)(x).productsFromServer,t=e.filter((function(e){return"phone"===e.type}));return Object(O.jsx)(Q,{products:t,title:"Mobile phones"})},z=function(){var e=Object(d.useContext)(x).productsFromServer,t=e.filter((function(e){return"tablet"===e.type}));return Object(O.jsx)(Q,{products:t,title:"Tablets"})},K=function(){var e=Object(d.useContext)(x).productsFromServer,t=e.filter((function(e){return"accessory"===e.type}));return Object(O.jsx)(Q,{products:t,title:"Accessories"})},X=(c(89),function(){return Object(O.jsx)("div",{className:"loader","data-cy":"loader",children:Object(O.jsx)("div",{className:"loader__content"})})}),Z=(c(90),c(91),function(){return Object(O.jsxs)("button",{type:"button","data-cy":"backButton",className:"arrow-back",onClick:function(){return window.history.back()},children:[Object(O.jsx)("img",{src:"icons/arrow.svg",alt:"arrow",className:"arrow-back__arrow"}),Object(O.jsx)("p",{className:"arrow-back__title",children:"Back"})]})}),ee=function(e){var t=e.details,c=Object(d.useState)(null===t||void 0===t?void 0:t.images[0]),s=Object(l.a)(c,2),n=s[0],a=s[1],i=Object(d.useContext)(x).productsFromServer,r=i.find((function(e){return e.id===(null===t||void 0===t?void 0:t.id)})),o=(null===r||void 0===r?void 0:r.discount)||0,u=(null===r||void 0===r?void 0:r.price)||0,j=(null===r||void 0===r?void 0:r.screen)||"",b=Math.round(u-u*(o/100)),m=i.sort((function(){return Math.random()-.5})),p=function(e){return function(){return a(e)}};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("section",{className:"product-details",children:Object(O.jsxs)("div",{className:"main-container",children:[Object(O.jsx)(Y,{type:(null===r||void 0===r?void 0:r.type)||"",productName:null===t||void 0===t?void 0:t.name}),Object(O.jsx)(Z,{}),Object(O.jsx)("h2",{className:"product-details__title",children:null===t||void 0===t?void 0:t.name}),Object(O.jsxs)("div",{className:"grid grid--tablet-desktop",children:[Object(O.jsx)("img",{src:n,alt:"product img",className:" product-details__image grid__item--tablet-2-7 grid__item--desktop-3-12 "}),Object(O.jsx)("div",{className:" product-details__img-selector grid__item--tablet-1-1 grid__item--desktop-1-2 ",children:null===t||void 0===t?void 0:t.images.map((function(e){return Object(O.jsx)("button",{type:"button",onClick:p(e),children:Object(O.jsx)("img",{src:e,alt:"product img in selector",className:q()("product-details__img-selector-item",{"product-details__img-selector-item--selected":e===n})})},e)}))}),Object(O.jsxs)("div",{className:" product-details__main-controls grid__item--tablet-8-12 grid__item--desktop-14-20 ",children:[Object(O.jsxs)("div",{className:"prices prices--details",children:[Object(O.jsx)("div",{className:"prices__price",children:"$".concat(o?b:u)}),o>0&&Object(O.jsx)("div",{className:"prices__price prices__price--discount",children:"$".concat(u)})]}),Object(O.jsx)(E,{className:"primary-button--details",product:r}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"Screen"}),Object(O.jsx)("div",{className:"product-details__value",children:j})]}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"Resolution"}),Object(O.jsx)("div",{className:"product-details__value",children:null===t||void 0===t?void 0:t.display.screenResolution})]}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"Processor"}),Object(O.jsx)("div",{className:"product-details__value",children:null===t||void 0===t?void 0:t.hardware.cpu})]}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"RAM"}),Object(O.jsx)("div",{className:"product-details__value",children:null===t||void 0===t?void 0:t.storage.ram})]})]}),Object(O.jsxs)("div",{className:" product-details__section-about grid__item--tablet-1-12 grid__item--desktop-1-12 ","data-cy":"productDescription",children:[Object(O.jsx)("h3",{className:"product-details__subtitle",children:"About"}),Object(O.jsx)("div",{className:"line"}),Object(O.jsx)("p",{className:"product-details__about",children:null===t||void 0===t?void 0:t.description})]}),Object(O.jsxs)("div",{className:" product-details__section-tech-specs grid__item--tablet-1-12 grid__item--desktop-14-24 ",children:[Object(O.jsx)("h3",{className:"product-details__subtitle",children:"Tech specs"}),Object(O.jsx)("div",{className:"line"}),Object(O.jsxs)("div",{className:"product-details__tech-specs",children:[Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"Screen"}),Object(O.jsx)("div",{className:"product-details__value",children:j})]}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"Resolution"}),Object(O.jsx)("div",{className:"product-details__value",children:null===t||void 0===t?void 0:t.display.screenResolution})]}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"Processor"}),Object(O.jsx)("div",{className:"product-details__value",children:null===t||void 0===t?void 0:t.hardware.cpu})]}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"RAM"}),Object(O.jsx)("div",{className:"product-details__value",children:null===t||void 0===t?void 0:t.storage.ram})]}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"OS"}),Object(O.jsx)("div",{className:"product-details__value",children:null===t||void 0===t?void 0:t.android.os})]}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"Built in memory"}),Object(O.jsx)("div",{className:"product-details__value",children:null===t||void 0===t?void 0:t.storage.flash})]}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"Bluetooth"}),Object(O.jsx)("div",{className:"product-details__value",children:null===t||void 0===t?void 0:t.connectivity.bluetooth})]}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"Camera"}),Object(O.jsx)("div",{className:"product-details__value",children:(null===t||void 0===t?void 0:t.camera.primary)||"unknown"})]}),Object(O.jsxs)("div",{className:"product-details__row",children:[Object(O.jsx)("div",{className:"product-details__option",children:"Cell"}),Object(O.jsx)("div",{className:"product-details__value",children:null===t||void 0===t?void 0:t.connectivity.cell})]})]})]})]})]})}),Object(O.jsx)("section",{children:Object(O.jsx)(A,{products:m,title:"You may also like",className:"random"})})]})},te=function(){var e=Object(i.q)().productId,t=void 0===e?"":e,c=Object(d.useContext)(v).setError,s=Object(d.useState)(null),n=Object(l.a)(s,2),a=n[0],u=n[1],j=Object(d.useState)(!1),b=Object(l.a)(j,2),_=b[0],h=b[1],x=function(){var e=Object(o.a)(Object(r.a)().mark((function e(){var s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,p(t);case 4:s=e.sent,u(s),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c(m.LOAD_ProductDetails);case 11:return e.prev=11,h(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){x()}),[t]),_?Object(O.jsx)(X,{}):Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(ee,{details:a})})},ce=(c(92),function(e){var t,c=e.cartItem,s=e.cart,n=e.setCart;return Object(O.jsxs)("div",{className:"cart-item",children:[Object(O.jsxs)("div",{className:"cart-item__top",children:[Object(O.jsx)("button",{type:"button",className:"cart-item__delete-button","data-cy":"cartDeleteButton",onClick:(t=c.id,function(){n(s.filter((function(e){return e.id!==t})))}),children:Object(O.jsx)("img",{src:"icons/cross.svg",alt:"delete button"})}),Object(O.jsxs)(a.b,{to:"../".concat(function(e){switch(e){case"phone":return"phones";case"tablet":return"tablets";case"accessory":return"accessories";default:return""}}(c.product.type),"/").concat(c.product.id),className:"cart-item__link",children:[Object(O.jsx)("img",{src:c.product.imageUrl,alt:"product img",className:"cart-item__img"}),Object(O.jsx)("p",{className:"cart-item__title",children:c.product.name})]})]}),Object(O.jsxs)("div",{className:"cart-item__bottom",children:[Object(O.jsxs)("div",{className:"cart-item__control",children:[Object(O.jsx)("button",{type:"button",disabled:1===c.quantity,className:"cart-item__control-button",onClick:function(e){return function(){n(s.map((function(t){return t.id===e?{id:t.id,quantity:t.quantity-1,product:t.product}:t})))}}(c.id),children:Object(O.jsx)("img",{src:"icons/minus.svg",alt:"minus button"})}),Object(O.jsx)("p",{className:"cart-item__quantity","data-cy":"productQauntity",children:c.quantity}),Object(O.jsx)("button",{type:"button",className:"cart-item__control-button",onClick:function(e){return function(){n(s.map((function(t){return t.id===e?{id:t.id,quantity:t.quantity+1,product:t.product}:t})))}}(c.id),children:Object(O.jsx)("img",{src:"icons/plus.svg",alt:"plus button"})})]}),Object(O.jsx)("h3",{className:"cart-item__price",children:"$".concat(G(c.product.price,c.product.discount)*c.quantity)})]})]})}),se=(c(93),function(){var e=Object(d.useContext)(g),t=e.cart,c=e.setCart,s=Object(d.useContext)(_).setNotification,n=t.reduce((function(e,t){return e+G(t.product.price,t.product.discount)*t.quantity}),0);return Object(O.jsx)("section",{className:"cart",children:Object(O.jsx)("div",{className:"main-container",children:t.length>0?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Z,{}),Object(O.jsx)("h1",{children:"Cart"}),Object(O.jsxs)("div",{className:"grid grid--desktop",children:[Object(O.jsx)("div",{className:" cart__items grid__item--desktop-1-16 ",children:t.map((function(e){return Object(O.jsx)(ce,{cartItem:e,cart:t,setCart:c})}))}),Object(O.jsxs)("div",{className:" cart__total grid__item--desktop-17-24 ",children:[Object(O.jsx)("h2",{className:"cart__total-price",children:"$".concat(n)}),Object(O.jsx)("p",{className:"cart__length",children:"Total for ".concat(t.length," items")}),Object(O.jsx)("div",{className:"line"}),Object(O.jsx)("button",{type:"button",className:"cart__checkout",onClick:function(){return s("We are sorry, but this feature is not implemented yet")},children:"Checkout"})]})]})]}):Object(O.jsx)(H,{text:"Your cart is empty"})})})}),ne=function(){var e=Object(d.useContext)(y).favorites;return Object(O.jsx)(Q,{products:e,title:"Favorites",isFavorites:!0})},ae=(c(94),c(95),function(){return Object(O.jsx)("footer",{className:"footer",children:Object(O.jsx)("div",{className:"main-container",children:Object(O.jsxs)("div",{className:"footer__content",children:[Object(O.jsx)(a.c,{to:"home",className:"footer__logo",children:Object(O.jsx)("img",{src:"icons/logo.svg",alt:"logo"})}),Object(O.jsxs)("div",{className:"links",children:[Object(O.jsx)("a",{href:"https://github.com/andriimelnyq",className:"links__item",target:"_blank",rel:"noreferrer",children:"Github"}),Object(O.jsx)("a",{href:"mailto:andriimelnyq@gmail.com",className:"links__item",target:"_blank",rel:"noreferrer",children:"Contacts"}),Object(O.jsx)("a",{href:"https://github.com/andriimelnyq",className:"links__item",target:"_blank",rel:"noreferrer",children:"Rights"})]}),Object(O.jsxs)("button",{type:"button",className:"back-to-top",onClick:function(){window.scrollTo(0,0)},children:[Object(O.jsx)("p",{className:"back-to-top__title",children:"Back to top"}),Object(O.jsx)("img",{src:"icons/arrow.svg",alt:"top arrow",className:"back-to-top__image"})]})]})})})}),ie=c(103),re=c(9),oe=function(e){var t=e.link,c=e.className,s=e.quantity,n=void 0===s?0:s,i=e.children,r=e.onClick,o="".concat(c,"--selected");return Object(O.jsxs)(a.c,{to:"home"===t?"/":"/".concat(t),className:function(e){var t=e.isActive;return q()(c,Object(re.a)({},o,t))},onClick:r,children:[i,n>0&&Object(O.jsx)("div",{className:"icon__count",children:n})]})},le=(c(96),function(e){var t=e.navLinks,c=e.setHasMobileMenu,s=e.quantityCart,n=e.quantityFavorites,i=function(){return c(!1)};return Object(d.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="auto"}}),[]),Object(O.jsxs)("nav",{className:"mobile-menu",children:[Object(O.jsxs)("div",{className:"mobile-menu__top",children:[Object(O.jsx)(a.c,{to:"home",className:"logo",onClick:i,children:Object(O.jsx)("img",{src:"icons/logo.svg",alt:"logo"})}),Object(O.jsx)("button",{type:"button",className:"icon icon--visible-on-mobile",onClick:i,children:Object(O.jsx)("img",{src:"icons/cross.svg",alt:"cross",className:"icon__item"})})]}),Object(O.jsx)("ul",{className:"mobile-menu__list",children:t.map((function(e){return Object(O.jsx)(a.c,{to:e,onClick:i,className:function(e){var t=e.isActive;return q()("mobile-menu__list-item",{"mobile-menu__list-item--selected":t})},children:e})}))}),Object(O.jsxs)("div",{className:"mobile-menu__bottom",children:[Object(O.jsx)(oe,{link:"favorites",className:"icon icon--menu icon--visible-on-mobile",quantity:n,onClick:i,children:Object(O.jsx)("img",{src:"icons/favourites.svg",alt:"favourites",className:"icon__item"})}),Object(O.jsx)(oe,{link:"cart",className:"icon icon--menu icon--visible-on-mobile",quantity:s,onClick:i,children:Object(O.jsx)("img",{src:"icons/cart.svg",alt:"cart",className:"icon__item"})})]})]})}),de=c(44),ue=(c(99),function(e){var t=e.placeholder,c=Object(a.d)(),s=Object(l.a)(c,2),n=s[0],i=s[1],r=Object(d.useState)(""),o=Object(l.a)(r,2),u=o[0],j=o[1],b=Object(d.useCallback)(Object(de.debounce)(i,1e3),[]);return Object(O.jsx)("input",{type:"search",placeholder:"Search in ".concat(t,"..."),onChange:function(e){j(e.target.value),b(R(n,{query:e.target.value.replace(/\s+/g,"").trim().toLocaleLowerCase()||null,page:"1"}))},value:u,className:"search-input"})}),je=(c(100),function(){var e=["home","phones","tablets","accessories"],t=Object(d.useState)(!1),c=Object(l.a)(t,2),s=c[0],n=c[1],a=Object(d.useContext)(g).cart,r=Object(d.useContext)(y).favorites,o=Object(i.m)(),u=Object(i.q)().productId,j=e.some((function(e){return o.pathname.includes(e)||o.pathname.includes("favorites")}))&&!u;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ie.a,{in:s,classNames:"mobile-menu",timeout:300,mountOnEnter:!0,unmountOnExit:!0,children:Object(O.jsx)(le,{navLinks:e,setHasMobileMenu:n,quantityCart:a.length,quantityFavorites:r.length})}),Object(O.jsxs)("header",{className:"header",children:[Object(O.jsxs)("div",{className:"header__container",children:[Object(O.jsx)(oe,{link:"home",className:"logo",children:Object(O.jsx)("img",{src:"icons/logo.svg",alt:"logo"})}),Object(O.jsx)("ul",{className:"links",children:e.map((function(e){return Object(O.jsx)(oe,{link:e,className:"links__item",children:e},e)}))})]}),Object(O.jsxs)("div",{className:"header__container",children:[Object(O.jsx)("button",{type:"button",className:"icon icon--visible-on-mobile",onClick:function(){return n(!0)},children:Object(O.jsx)("img",{src:"icons/menu.svg",alt:"menu",className:"icon__item"})}),j&&Object(O.jsx)(ue,{placeholder:o.pathname.slice(1)}),Object(O.jsx)(oe,{link:"favorites",className:"icon",quantity:r.length,children:Object(O.jsx)("img",{src:"icons/favourites.svg",alt:"favourites",className:"icon__item"})}),Object(O.jsx)(oe,{link:"cart",className:"icon",quantity:a.length,children:Object(O.jsx)("img",{src:"icons/cart.svg",alt:"cart",className:"icon__item"})})]})]})]})}),be=(c(101),function(){var e=Object(d.useContext)(_),t=e.notification,c=e.setNotification;return Object(O.jsx)(ie.a,{in:!!t,classNames:"notification",timeout:300,mountOnEnter:!0,unmountOnExit:!0,children:Object(O.jsxs)("div",{className:"notification",children:[t,Object(O.jsx)("button",{type:"button",onClick:function(){return c("")},className:"notification__button-close",children:Object(O.jsx)("img",{src:"icons/close.svg",alt:"close notification button"})})]})})}),me=function(){var e=Object(d.useContext)(v).error,t=Object(d.useContext)(x).isLoadProducts;return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(je,{}),Object(O.jsx)(be,{}),t?Object(O.jsx)(X,{}):e===m.NONE&&Object(O.jsx)(i.b,{}),e!==m.NONE&&Object(O.jsx)(H,{text:e}),Object(O.jsx)(ae,{})]})};n.a.render(Object(O.jsx)(h,{children:Object(O.jsx)(f,{children:Object(O.jsx)(k,{children:Object(O.jsx)(a.a,{children:Object(O.jsx)(i.e,{children:Object(O.jsxs)(i.c,{path:"/",element:Object(O.jsx)(me,{}),children:[Object(O.jsx)(i.c,{path:"home",element:Object(O.jsx)(i.a,{to:"/",replace:!0})}),Object(O.jsx)(i.c,{index:!0,element:Object(O.jsx)(B,{})}),Object(O.jsx)(i.c,{path:"*",element:Object(O.jsx)(H,{text:"Page not found"})}),Object(O.jsx)(i.c,{path:"phones",element:Object(O.jsx)(W,{})}),Object(O.jsx)(i.c,{path:"phones/:productId",element:Object(O.jsx)(te,{})}),Object(O.jsx)(i.c,{path:"tablets",element:Object(O.jsx)(z,{})}),Object(O.jsx)(i.c,{path:"tablets/:productId",element:Object(O.jsx)(te,{})}),Object(O.jsx)(i.c,{path:"accessories",element:Object(O.jsx)(K,{})}),Object(O.jsx)(i.c,{path:"accessories/:productId",element:Object(O.jsx)(te,{})}),Object(O.jsx)(i.c,{path:"cart",element:Object(O.jsx)(se,{})}),Object(O.jsx)(i.c,{path:"favorites",element:Object(O.jsx)(ne,{})})]})})})})})}),document.getElementById("root"))},54:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},86:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){},90:function(e,t,c){},91:function(e,t,c){},92:function(e,t,c){},93:function(e,t,c){},94:function(e,t,c){},95:function(e,t,c){},96:function(e,t,c){},99:function(e,t,c){}},[[102,1,2]]]);
//# sourceMappingURL=main.2359d395.chunk.js.map